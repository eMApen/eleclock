#include "ht1621.h"
#include "irf.h"
void delay_us(unsigned int ucDat){
    do{
        unsigned int d=200; 
        while(--d){;} 
    }while(--ucDat);
}

void init_io(void)   //?????
{
    TRISC = 0xFF;   //?CCP1?????
        //***???TMR0???***
    T0CS=0;                //TMRO?????????????(Fosc/4)
    PSA=1;                 //???????WDT
    TMR0=0x13;             //??250??,????256-250+13
    T0IF=0;                //??TMR0?????
    T0IE=1;                //TMR0????
    //**********************

	//***CCP2???***
	CCP2CON=0x04;			//????????????
	T1CON=0x00;				//CCP????????T1???????????????????
	TRISC1=1;               //RC1?????????????????????????
	CCP2IF=0;               //?????????
	CCP2IE=1;				//???????
	TMR1ON=1;	            //T1??
	//**********************
    //***???????****
    //???T0???????,????????
    GIE=1;                 //?????
    //*********************
//  PORTD=0;    //???0
}

void wrong(int errorid)  //??????????????????????
{
  	int_times=0;
  	tmr_times=0;
  	head_ok=0;
  	code_data=0;  	
//    IR_data_display(errorid);
}

unsigned char one_zero(void)
{  	
	//???????HT6221?????0????????1.12ms
	//?????????0.25ms,?????????0.75ms??1.5ms?????0??
  	if((tmr_times>6)&(tmr_times<12))
  	{
    	return 0;
  	}
	//???????HT6221?????1????????2.24ms
	//?????????0.25ms,?????????1.75ms??2.75ms?????0??
  	else if((tmr_times>13)&(tmr_times<22))
  	{
    	return 1;
  	}
	//????????0.75-1.5ms??1.75-2.75ms??????????????2
  	return 2;
}
